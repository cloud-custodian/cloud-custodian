

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>c7n.filters package &mdash; Cloud Custodian 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/c1_labs.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Cloud Custodian 1.0 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Cloud Custodian
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usecases/index.html">Use Cases</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../policy/index.html">Policy</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Cloud Custodian</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>c7n.filters package</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="c7n-filters-package">
<h1>c7n.filters package<a class="headerlink" href="#c7n-filters-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-c7n.filters.core">
<span id="c7n-filters-core-module"></span><h2>c7n.filters.core module<a class="headerlink" href="#module-c7n.filters.core" title="Permalink to this headline">¶</a></h2>
<p>Resource Filtering Logic</p>
<dl class="class">
<dt id="c7n.filters.core.AgeFilter">
<em class="property">class </em><code class="descclassname">c7n.filters.core.</code><code class="descname">AgeFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#AgeFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.AgeFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.Filter" title="c7n.filters.core.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.Filter</span></code></a></p>
<p>Automatically filter resources older than a given date.</p>
<dl class="attribute">
<dt id="c7n.filters.core.AgeFilter.date_attribute">
<code class="descname">date_attribute</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.core.AgeFilter.date_attribute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.AgeFilter.get_resource_date">
<code class="descname">get_resource_date</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#AgeFilter.get_resource_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.AgeFilter.get_resource_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.AgeFilter.schema">
<code class="descname">schema</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.core.AgeFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.AgeFilter.threshold_date">
<code class="descname">threshold_date</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.core.AgeFilter.threshold_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.AgeFilter.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#AgeFilter.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.AgeFilter.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.core.And">
<em class="property">class </em><code class="descclassname">c7n.filters.core.</code><code class="descname">And</code><span class="sig-paren">(</span><em>data</em>, <em>registry</em>, <em>manager</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#And"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.And" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.Filter" title="c7n.filters.core.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.Filter</span></code></a></p>
<dl class="method">
<dt id="c7n.filters.core.And.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>events=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#And.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.And.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.And.type">
<code class="descname">type</code><em class="property"> = 'and'</em><a class="headerlink" href="#c7n.filters.core.And.type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.core.EventFilter">
<em class="property">class </em><code class="descclassname">c7n.filters.core.</code><code class="descname">EventFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#EventFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.EventFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.ValueFilter" title="c7n.filters.core.ValueFilter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.ValueFilter</span></code></a></p>
<p>Filter against a cloudwatch event associated to a resource type.</p>
<dl class="method">
<dt id="c7n.filters.core.EventFilter.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#EventFilter.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.EventFilter.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.EventFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'default': {'type': 'object'}, 'value': {'oneOf': [{'type': 'array'}, {'type': 'string'}, {'type': 'boolean'}, {'type': 'number'}]}, 'value_from': {'additionalProperties': 'False', 'required': ['url'], 'type': 'object', 'properties': {'url': {'type': 'string'}, 'expr': {'type': 'string'}, 'format': {'enum': ['csv', 'json', 'txt']}}}, 'value_type': {'enum': ['age', 'integer', 'expiration', 'normalize', 'size', 'cidr', 'cidr_size', 'swap']}, 'key': {'type': 'string'}, 'type': {'enum': ['event']}, 'op': {'enum': ['regex', 'ni', 'gt', 'lt', 'gte', 'glob', 'not-equal', 'equal', 'greater-than', 'ne', 'ge', 'le', 'lte', 'in', 'less-than', 'eq', 'not-in']}}}</em><a class="headerlink" href="#c7n.filters.core.EventFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.EventFilter.type">
<code class="descname">type</code><em class="property"> = 'event'</em><a class="headerlink" href="#c7n.filters.core.EventFilter.type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.EventFilter.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#EventFilter.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.EventFilter.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.core.Filter">
<em class="property">class </em><code class="descclassname">c7n.filters.core.</code><code class="descname">Filter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#Filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="c7n.filters.core.Filter.executor_factory">
<code class="descname">executor_factory</code><a class="headerlink" href="#c7n.filters.core.Filter.executor_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">ThreadPoolExecutor</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.Filter.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#c7n.filters.core.Filter.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.Filter.metrics">
<code class="descname">metrics</code><em class="property"> = ()</em><a class="headerlink" href="#c7n.filters.core.Filter.metrics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.Filter.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#Filter.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.Filter.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Bulk process resources and return filtered set.</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.Filter.schema">
<code class="descname">schema</code><em class="property"> = {'type': 'object'}</em><a class="headerlink" href="#c7n.filters.core.Filter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.Filter.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#Filter.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.Filter.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>validate filter config, return validation error or self</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.core.FilterRegistry">
<em class="property">class </em><code class="descclassname">c7n.filters.core.</code><code class="descname">FilterRegistry</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#FilterRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.FilterRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="c7n.html#c7n.registry.PluginRegistry" title="c7n.registry.PluginRegistry"><code class="xref py py-class docutils literal"><span class="pre">c7n.registry.PluginRegistry</span></code></a></p>
<dl class="method">
<dt id="c7n.filters.core.FilterRegistry.factory">
<code class="descname">factory</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#FilterRegistry.factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.FilterRegistry.factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory func for filters.</p>
<p>data - policy config for filters
manager - resource type manager (ec2, s3, etc)</p>
</dd></dl>

<dl class="method">
<dt id="c7n.filters.core.FilterRegistry.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>data</em>, <em>manager</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#FilterRegistry.parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.FilterRegistry.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="c7n.filters.core.FilterValidationError">
<em class="property">exception </em><code class="descclassname">c7n.filters.core.</code><code class="descname">FilterValidationError</code><a class="reference internal" href="../_modules/c7n/filters/core.html#FilterValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.FilterValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
</dd></dl>

<dl class="class">
<dt id="c7n.filters.core.Or">
<em class="property">class </em><code class="descclassname">c7n.filters.core.</code><code class="descname">Or</code><span class="sig-paren">(</span><em>data</em>, <em>registry</em>, <em>manager</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#Or"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.Or" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.Filter" title="c7n.filters.core.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.Filter</span></code></a></p>
<dl class="method">
<dt id="c7n.filters.core.Or.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#Or.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.Or.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.Or.process_set">
<code class="descname">process_set</code><span class="sig-paren">(</span><em>resources</em>, <em>event</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#Or.process_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.Or.process_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.Or.type">
<code class="descname">type</code><em class="property"> = 'or'</em><a class="headerlink" href="#c7n.filters.core.Or.type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.core.ValueFilter">
<em class="property">class </em><code class="descclassname">c7n.filters.core.</code><code class="descname">ValueFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#ValueFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.ValueFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.Filter" title="c7n.filters.core.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.Filter</span></code></a></p>
<p>Generic value filter using jmespath</p>
<dl class="attribute">
<dt id="c7n.filters.core.ValueFilter.annotate">
<code class="descname">annotate</code><em class="property"> = True</em><a class="headerlink" href="#c7n.filters.core.ValueFilter.annotate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.ValueFilter.expr">
<code class="descname">expr</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.core.ValueFilter.expr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.ValueFilter.match">
<code class="descname">match</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#ValueFilter.match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.ValueFilter.match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.ValueFilter.op">
<code class="descname">op</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.core.ValueFilter.op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.ValueFilter.process_value_type">
<code class="descname">process_value_type</code><span class="sig-paren">(</span><em>sentinel</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#ValueFilter.process_value_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.ValueFilter.process_value_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.ValueFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'default': {'type': 'object'}, 'value': {'oneOf': [{'type': 'array'}, {'type': 'string'}, {'type': 'boolean'}, {'type': 'number'}]}, 'value_from': {'additionalProperties': 'False', 'required': ['url'], 'type': 'object', 'properties': {'url': {'type': 'string'}, 'expr': {'type': 'string'}, 'format': {'enum': ['csv', 'json', 'txt']}}}, 'value_type': {'enum': ['age', 'integer', 'expiration', 'normalize', 'size', 'cidr', 'cidr_size', 'swap']}, 'key': {'type': 'string'}, 'type': {'enum': ['value']}, 'op': {'enum': ['regex', 'ni', 'gt', 'lt', 'gte', 'glob', 'not-equal', 'equal', 'greater-than', 'ne', 'ge', 'le', 'lte', 'in', 'less-than', 'eq', 'not-in']}}}</em><a class="headerlink" href="#c7n.filters.core.ValueFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.ValueFilter.type">
<code class="descname">type</code><em class="property"> = 'value'</em><a class="headerlink" href="#c7n.filters.core.ValueFilter.type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.ValueFilter.v">
<code class="descname">v</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.core.ValueFilter.v" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.core.ValueFilter.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#ValueFilter.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.ValueFilter.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.core.ValueFilter.vtype">
<code class="descname">vtype</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.core.ValueFilter.vtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.filters.core.glob_match">
<code class="descclassname">c7n.filters.core.</code><code class="descname">glob_match</code><span class="sig-paren">(</span><em>value</em>, <em>pattern</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#glob_match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.glob_match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.filters.core.operator_in">
<code class="descclassname">c7n.filters.core.</code><code class="descname">operator_in</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#operator_in"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.operator_in" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.filters.core.operator_ni">
<code class="descclassname">c7n.filters.core.</code><code class="descname">operator_ni</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#operator_ni"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.operator_ni" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.filters.core.regex_match">
<code class="descclassname">c7n.filters.core.</code><code class="descname">regex_match</code><span class="sig-paren">(</span><em>value</em>, <em>regex</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/core.html#regex_match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.core.regex_match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.filters.iamaccess">
<span id="c7n-filters-iamaccess-module"></span><h2>c7n.filters.iamaccess module<a class="headerlink" href="#module-c7n.filters.iamaccess" title="Permalink to this headline">¶</a></h2>
<div class="section" id="iam-resource-policy-checker">
<h3>IAM Resource Policy Checker<a class="headerlink" href="#iam-resource-policy-checker" title="Permalink to this headline">¶</a></h3>
<p>When securing resources with iam policies, we want to parse and evaluate
the resource&#8217;s policy for any cross account or public access grants that
are not intended.</p>
<p>In general, iam policies can be complex, and where possible using iam
simulate is preferrable, but requires passing the caller&#8217;s arn, which
is not feasible when we&#8217;re evaluating who the valid set of callers
are.</p>
<p>References</p>
<ul class="simple">
<li>IAM Policy Evaluation - <a class="reference external" href="http://goo.gl/sH5Dt5">http://goo.gl/sH5Dt5</a></li>
<li>IAM Policy Reference - <a class="reference external" href="http://goo.gl/U0a06y">http://goo.gl/U0a06y</a></li>
</ul>
<dl class="class">
<dt id="c7n.filters.iamaccess.CrossAccountAccessFilter">
<em class="property">class </em><code class="descclassname">c7n.filters.iamaccess.</code><code class="descname">CrossAccountAccessFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/iamaccess.html#CrossAccountAccessFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.iamaccess.CrossAccountAccessFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.Filter" title="c7n.filters.core.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.Filter</span></code></a></p>
<p>Matches any resource which</p>
<dl class="method">
<dt id="c7n.filters.iamaccess.CrossAccountAccessFilter.get_accounts">
<code class="descname">get_accounts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/iamaccess.html#CrossAccountAccessFilter.get_accounts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.iamaccess.CrossAccountAccessFilter.get_accounts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.iamaccess.CrossAccountAccessFilter.get_resource_policy">
<code class="descname">get_resource_policy</code><span class="sig-paren">(</span><em>r</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/iamaccess.html#CrossAccountAccessFilter.get_resource_policy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.iamaccess.CrossAccountAccessFilter.get_resource_policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.iamaccess.CrossAccountAccessFilter.policy_attribute">
<code class="descname">policy_attribute</code><em class="property"> = 'Policy'</em><a class="headerlink" href="#c7n.filters.iamaccess.CrossAccountAccessFilter.policy_attribute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.iamaccess.CrossAccountAccessFilter.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/iamaccess.html#CrossAccountAccessFilter.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.iamaccess.CrossAccountAccessFilter.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.iamaccess.CrossAccountAccessFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'whitelist_from': {'additionalProperties': 'False', 'required': ['url'], 'type': 'object', 'properties': {'url': {'type': 'string'}, 'expr': {'type': 'string'}, 'format': {'enum': ['csv', 'json', 'txt']}}}, 'whitelist': {'items': {'type': 'string'}, 'type': 'array'}, 'type': {'enum': ['cross-account']}}}</em><a class="headerlink" href="#c7n.filters.iamaccess.CrossAccountAccessFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.filters.iamaccess.check_cross_account">
<code class="descclassname">c7n.filters.iamaccess.</code><code class="descname">check_cross_account</code><span class="sig-paren">(</span><em>policy_text</em>, <em>allowed_accounts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/iamaccess.html#check_cross_account"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.iamaccess.check_cross_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Find cross account access policy grant not explicitly allowed</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-c7n.filters.metrics">
<span id="c7n-filters-metrics-module"></span><h2>c7n.filters.metrics module<a class="headerlink" href="#module-c7n.filters.metrics" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>TODO make filters package</dt>
<dd><ul class="first last simple">
<li>offhours</li>
<li>metrics</li>
<li></li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="c7n.filters.metrics.MetricsFilter">
<em class="property">class </em><code class="descclassname">c7n.filters.metrics.</code><code class="descname">MetricsFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/metrics.html#MetricsFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.metrics.MetricsFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.Filter" title="c7n.filters.core.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.Filter</span></code></a></p>
<p>Supports cloud watch metrics filters on resources.</p>
<p>Docs on cloud watch metrics</p>
<ul class="simple">
<li>GetMetricStatistics - <a class="reference external" href="http://goo.gl/w8mMEY">http://goo.gl/w8mMEY</a></li>
<li>Supported Metrics - <a class="reference external" href="http://goo.gl/n0E0L7">http://goo.gl/n0E0L7</a></li>
</ul>
<p>usage:: yaml</p>
<blockquote>
<div><ul>
<li><p class="first">name: ec2-underutilized
resource: ec2
filters:</p>
<blockquote>
<div><ul class="simple">
<li>type: metric
name: CPUUtilization
days: 4
period: 86400
value: 30
op: less-than</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Note periods when a resource is not sending metrics are not part
of calculated statistics as in the case of a stopped ec2 instance,
nor for resources to new to have existed the entire
period. ie. being stopped for an ec2 intsance wouldn&#8217;t lower the
average cpu utilization, nor would</p>
<p>Todo</p>
<blockquote>
<div><ul class="simple">
<li>support offhours considerations (just run at night?)</li>
<li>support additional stats, values</li>
</ul>
</div></blockquote>
<p>Use Case / Find Underutilized servers non-inclusive of offhour periods</p>
<blockquote>
<div><p>If server has no data for period, its omitted.</p>
<p>So a server that&#8217;s off reports no metrics for the relevant period.</p>
</div></blockquote>
<dl class="attribute">
<dt id="c7n.filters.metrics.MetricsFilter.DEFAULT_NAMESPACE">
<code class="descname">DEFAULT_NAMESPACE</code><em class="property"> = {'sqs': 'AWS/SQS', 'firehose': 'AWS/Firehose', 'kinesis': 'AWS/Kinesis', 'rds': 'AWS/RDS', 'redshift': 'AWS/Redshift', 'elb': 'AWS/ELB', 'route53': 'AWS/Route53', 'sns': 'AWS/SNS', 'cloudfront': 'AWS/CloudFront', 'dynamodb': 'AWS/DynamoDB', 's3': 'AWS/S3', 'cloudsearch': 'AWS/CloudSearch', 'ec2': 'AWS/EC2', 'emr': 'AWS/EMR', 'ecs': 'AWS/ECS', 'elasticache': 'AWS/ElastiCache', 'logs': 'AWS/Logs', 'events': 'AWS/Events', 'es': 'AWS/ES', 'lambda': 'AWS/Lambda'}</em><a class="headerlink" href="#c7n.filters.metrics.MetricsFilter.DEFAULT_NAMESPACE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.metrics.MetricsFilter.MAX_QUERY_POINTS">
<code class="descname">MAX_QUERY_POINTS</code><em class="property"> = 50850</em><a class="headerlink" href="#c7n.filters.metrics.MetricsFilter.MAX_QUERY_POINTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.metrics.MetricsFilter.MAX_RESULT_POINTS">
<code class="descname">MAX_RESULT_POINTS</code><em class="property"> = 1440</em><a class="headerlink" href="#c7n.filters.metrics.MetricsFilter.MAX_RESULT_POINTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.metrics.MetricsFilter.get_dimensions">
<code class="descname">get_dimensions</code><span class="sig-paren">(</span><em>resource</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/metrics.html#MetricsFilter.get_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.metrics.MetricsFilter.get_dimensions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.metrics.MetricsFilter.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/metrics.html#MetricsFilter.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.metrics.MetricsFilter.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.metrics.MetricsFilter.process_resource_set">
<code class="descname">process_resource_set</code><span class="sig-paren">(</span><em>resource_set</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/metrics.html#MetricsFilter.process_resource_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.metrics.MetricsFilter.process_resource_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.metrics.MetricsFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ('value', 'name'), 'type': 'object', 'properties': {'statistics': {'enum': ['Average', 'Sum', 'Maximum', 'Minimum', 'SampleCount'], 'type': 'string'}, 'name': {'type': 'string'}, 'namespace': {'type': 'string'}, 'days': {'type': 'number'}, 'value': {'type': 'number'}, 'op': {'enum': ['regex', 'ni', 'gt', 'lt', 'gte', 'glob', 'not-equal', 'equal', 'greater-than', 'ne', 'ge', 'le', 'lte', 'in', 'less-than', 'eq', 'not-in'], 'type': 'string'}, 'type': {'enum': ['metrics']}, 'dimensions': {'items': {'type': 'string'}, 'type': 'array'}}}</em><a class="headerlink" href="#c7n.filters.metrics.MetricsFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.filters.offhours">
<span id="c7n-filters-offhours-module"></span><h2>c7n.filters.offhours module<a class="headerlink" href="#module-c7n.filters.offhours" title="Permalink to this headline">¶</a></h2>
<div class="section" id="resource-scheduling-offhours">
<h3>Resource Scheduling Offhours<a class="headerlink" href="#resource-scheduling-offhours" title="Permalink to this headline">¶</a></h3>
<p>Custodian provides for time based filters, that allow for taking periodic
action on a resource, with resource schedule customization based on tag values.
A common use is offhours scheduling for asgs, and instances.</p>
</div>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Flexible offhours scheduling with opt-in, opt-out selection, and timezone
support.</li>
<li>Resume during offhours support.</li>
<li>Can be combined with other filters to get a particular set (
resources with tag, vpc, etc).</li>
<li>Can be combined with arbitrary actions</li>
</ul>
</div>
<div class="section" id="policy-configuration">
<h3>Policy Configuration<a class="headerlink" href="#policy-configuration" title="Permalink to this headline">¶</a></h3>
<p>We provide an <cite>onhour</cite> and <cite>offhour</cite> time filter, each should be used in a
different policy, they support the same configuration options</p>
<blockquote>
<div><ul>
<li><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">weekends:</th><td class="field-body">default true, whether to leave resources off for the weekend</td>
</tr>
</tbody>
</table>
</li>
<li><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">weekend-only:</th><td class="field-body">default false, whether to turn the resource off only on the</td>
</tr>
</tbody>
</table>
<p>weekend</p>
</li>
<li><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">default_tz:</th><td class="field-body">which tz to utilize when evaluating time</td>
</tr>
</tbody>
</table>
</li>
<li><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">tag:</th><td class="field-body">default maid_offhours, which resource tag key to look for the</td>
</tr>
</tbody>
</table>
<p>resource&#8217;s schedule.</p>
</li>
<li><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">opt-out:</th><td class="field-body">applies the default schedule to resource which do not specify</td>
</tr>
</tbody>
</table>
<p>any value. a value of <cite>off</cite> to disable/exclude the resource.</p>
</li>
</ul>
</div></blockquote>
<p>The default off hours and on hours are specified per the policy configuration
along with the opt-in/opt-out behavior. Resources can specify the timezone
that they wish to have this scheduled utilized with:</p>
</div>
<div class="section" id="tag-based-configuration">
<h3>Tag Based Configuration<a class="headerlink" href="#tag-based-configuration" title="Permalink to this headline">¶</a></h3>
<p>Note the tag name is configurable per policy configuration, examples below use
default tag name, ie. custodian_downtime.</p>
<ul class="simple">
<li>custodian_downtime:</li>
</ul>
<p>An empty tag value implies night and weekend offhours using the default
time zone configured in the policy (tz=est if unspecified).</p>
<ul class="simple">
<li>custodian_downtime: tz=pt</li>
</ul>
<p>Note all timezone aliases are referenced to a locality to ensure taking into
account local daylight savings time (if any).</p>
<ul class="simple">
<li>custodian_downtime: tz=Americas/Los_Angeles</li>
</ul>
<p>A geography can be specified but must be in the time zone database.</p>
<p>Per <a class="reference external" href="http://www.iana.org/time-zones">http://www.iana.org/time-zones</a></p>
<ul class="simple">
<li>custodian_downtime: off</li>
</ul>
<p>If offhours is configured to run in opt-out mode, this tag can be specified
to disable offhours on a given instance.</p>
</div>
<div class="section" id="policy-examples">
<h3>Policy examples<a class="headerlink" href="#policy-examples" title="Permalink to this headline">¶</a></h3>
<p>Turn ec2 instances on and off</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhours-stop</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhour</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">stop</span>

  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhours-start</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">onhour</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">start</span>
</pre></div>
</div>
<p>Here&#8217;s doing the same with auto scale groups</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">asg-offhours-stop</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">offhour</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">suspend</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">asg-onhours-start</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">onhour</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">resume</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>tag: the tag name to use when configuring</li>
<li>default_tz: the default timezone to use when interpreting offhours</li>
<li>offhour: the time to turn instances off, specified in 0-24</li>
<li>onhour: the time to turn instances on, specified in 0-24</li>
<li>opt-out: default behavior is opt in, as in <code class="docutils literal"><span class="pre">tag</span></code> must be present,
with opt-out: true, the tag doesn&#8217;t need to be present.</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhours-stop</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhour</span>
        <span class="l l-Scalar l-Scalar-Plain">tag</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">downtime</span>
        <span class="l l-Scalar l-Scalar-Plain">onhour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
        <span class="l l-Scalar l-Scalar-Plain">offhour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>
</pre></div>
</div>
<dl class="class">
<dt id="c7n.filters.offhours.OffHour">
<em class="property">class </em><code class="descclassname">c7n.filters.offhours.</code><code class="descname">OffHour</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#OffHour"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.OffHour" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.offhours.Time" title="c7n.filters.offhours.Time"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.offhours.Time</span></code></a></p>
<dl class="attribute">
<dt id="c7n.filters.offhours.OffHour.DEFAULT_HR">
<code class="descname">DEFAULT_HR</code><em class="property"> = 19</em><a class="headerlink" href="#c7n.filters.offhours.OffHour.DEFAULT_HR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.OffHour.get_default_schedule">
<code class="descname">get_default_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#OffHour.get_default_schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.OffHour.get_default_schedule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.OffHour.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['offhour', 'default_tz', 'type'], 'type': 'object', 'properties': {'offhour': {'minimum': 0, 'type': 'integer', 'maximum': 24}, 'opt-out': {'type': 'boolean'}, 'weekends': {'type': 'boolean'}, 'tag': {'type': 'string'}, 'weekends-only': {'type': 'boolean'}, 'default_tz': {'type': 'string'}, 'debug': {'type': 'boolean'}, 'type': {'enum': ['offhour']}}}</em><a class="headerlink" href="#c7n.filters.offhours.OffHour.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.OffHour.time_type">
<code class="descname">time_type</code><em class="property"> = 'off'</em><a class="headerlink" href="#c7n.filters.offhours.OffHour.time_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.offhours.OnHour">
<em class="property">class </em><code class="descclassname">c7n.filters.offhours.</code><code class="descname">OnHour</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#OnHour"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.OnHour" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.offhours.Time" title="c7n.filters.offhours.Time"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.offhours.Time</span></code></a></p>
<dl class="attribute">
<dt id="c7n.filters.offhours.OnHour.DEFAULT_HR">
<code class="descname">DEFAULT_HR</code><em class="property"> = 7</em><a class="headerlink" href="#c7n.filters.offhours.OnHour.DEFAULT_HR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.OnHour.get_default_schedule">
<code class="descname">get_default_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#OnHour.get_default_schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.OnHour.get_default_schedule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.OnHour.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['onhour', 'default_tz', 'type'], 'type': 'object', 'properties': {'opt-out': {'type': 'boolean'}, 'weekends': {'type': 'boolean'}, 'onhour': {'minimum': 0, 'type': 'integer', 'maximum': 24}, 'tag': {'type': 'string'}, 'weekends-only': {'type': 'boolean'}, 'default_tz': {'type': 'string'}, 'debug': {'type': 'boolean'}, 'type': {'enum': ['onhour']}}}</em><a class="headerlink" href="#c7n.filters.offhours.OnHour.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.OnHour.time_type">
<code class="descname">time_type</code><em class="property"> = 'on'</em><a class="headerlink" href="#c7n.filters.offhours.OnHour.time_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.offhours.ScheduleParser">
<em class="property">class </em><code class="descclassname">c7n.filters.offhours.</code><code class="descname">ScheduleParser</code><span class="sig-paren">(</span><em>default_schedule</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#ScheduleParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.ScheduleParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Parses tag values for custom on/off hours schedules.</p>
<p>At the minimum the <code class="docutils literal"><span class="pre">on</span></code> and <code class="docutils literal"><span class="pre">off</span></code> values are required. Each of
these must be seperated by a <code class="docutils literal"><span class="pre">;</span></code> in the format described below.</p>
<p><strong>Schedule format</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># up mon-fri from 7am-7pm; eastern time</span>
<span class="n">off</span><span class="o">=</span><span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">F</span><span class="p">,</span><span class="mi">19</span><span class="p">);</span><span class="n">on</span><span class="o">=</span><span class="p">(</span><span class="n">M</span><span class="o">-</span><span class="n">F</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
<span class="c1"># up mon-fri from 6am-9pm; up sun from 10am-6pm; pacific time</span>
<span class="n">off</span><span class="o">=</span><span class="p">[(</span><span class="n">M</span><span class="o">-</span><span class="n">F</span><span class="p">,</span><span class="mi">21</span><span class="p">),(</span><span class="n">U</span><span class="p">,</span><span class="mi">18</span><span class="p">)];</span><span class="n">on</span><span class="o">=</span><span class="p">[(</span><span class="n">M</span><span class="o">-</span><span class="n">F</span><span class="p">,</span><span class="mi">6</span><span class="p">),(</span><span class="n">U</span><span class="p">,</span><span class="mi">10</span><span class="p">)];</span><span class="n">tz</span><span class="o">=</span><span class="n">pt</span>
</pre></div>
</div>
<p><strong>Possible values</strong>:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">field</th>
<th class="head">values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>days</td>
<td>M, T, W, H, F, S, U</td>
</tr>
<tr class="row-odd"><td>hours</td>
<td>0, 1, 2, ..., 22, 23</td>
</tr>
</tbody>
</table>
<p>Days can be specified in a range (ex. M-F).</p>
</div></blockquote>
<p>If the timezone is not supplied, it is assumed ET (eastern time), but this
default can be configurable.</p>
<p><strong>Parser output</strong>:</p>
<p>The schedule parser will return a <code class="docutils literal"><span class="pre">dict</span></code> or <code class="docutils literal"><span class="pre">None</span></code> (if the schedule is
invalid):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># off=[(M-F,21),(U,18)];on=[(M-F,6),(U,10)];tz=pt</span>
<span class="p">{</span>
  <span class="n">off</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">days</span><span class="p">:</span> <span class="s2">&quot;M-F&quot;</span><span class="p">,</span> <span class="n">hour</span><span class="p">:</span> <span class="mi">21</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">days</span><span class="p">:</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">hour</span><span class="p">:</span> <span class="mi">18</span> <span class="p">}</span>
  <span class="p">],</span>
  <span class="n">on</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="n">days</span><span class="p">:</span> <span class="s2">&quot;M-F&quot;</span><span class="p">,</span> <span class="n">hour</span><span class="p">:</span> <span class="mi">6</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">days</span><span class="p">:</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">hour</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}</span>
  <span class="p">],</span>
  <span class="n">tz</span><span class="p">:</span> <span class="s2">&quot;pt&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="c7n.filters.offhours.ScheduleParser.DAY_MAP">
<code class="descname">DAY_MAP</code><em class="property"> = {'f': 4, 'h': 3, 'm': 0, 's': 5, 'u': 6, 't': 1, 'w': 2}</em><a class="headerlink" href="#c7n.filters.offhours.ScheduleParser.DAY_MAP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.ScheduleParser.VALID_HOURS">
<code class="descname">VALID_HOURS</code><em class="property"> = (0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23)</em><a class="headerlink" href="#c7n.filters.offhours.ScheduleParser.VALID_HOURS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.ScheduleParser.expand_day_range">
<code class="descname">expand_day_range</code><span class="sig-paren">(</span><em>days</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#ScheduleParser.expand_day_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.ScheduleParser.expand_day_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="c7n.filters.offhours.ScheduleParser.has_resource_schedule">
<em class="property">static </em><code class="descname">has_resource_schedule</code><span class="sig-paren">(</span><em>tag_value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#ScheduleParser.has_resource_schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.ScheduleParser.has_resource_schedule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.ScheduleParser.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>tag_value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#ScheduleParser.parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.ScheduleParser.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.ScheduleParser.parse_resource_schedule">
<code class="descname">parse_resource_schedule</code><span class="sig-paren">(</span><em>lexeme</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#ScheduleParser.parse_resource_schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.ScheduleParser.parse_resource_schedule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.offhours.Time">
<em class="property">class </em><code class="descclassname">c7n.filters.offhours.</code><code class="descname">Time</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#Time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.Time" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.Filter" title="c7n.filters.core.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.Filter</span></code></a></p>
<dl class="attribute">
<dt id="c7n.filters.offhours.Time.DEFAULT_TAG">
<code class="descname">DEFAULT_TAG</code><em class="property"> = 'maid_offhours'</em><a class="headerlink" href="#c7n.filters.offhours.Time.DEFAULT_TAG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.Time.DEFAULT_TZ">
<code class="descname">DEFAULT_TZ</code><em class="property"> = 'et'</em><a class="headerlink" href="#c7n.filters.offhours.Time.DEFAULT_TZ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.Time.TZ_ALIASES">
<code class="descname">TZ_ALIASES</code><em class="property"> = {'gt': 'Europe/London', 'cdt': 'America/Chicago', 'edt': 'America/New_York', 'et': 'America/New_York', 'pst': 'America/Los_Angeles', 'ct': 'America/Chicago', 'est': 'America/New_York', 'pt': 'America/Los_Angeles', 'pdt': 'America/Los_Angeles', 'mt': 'America/Denver', 'cst': 'America/Chicago', 'gmt': 'Europe/London'}</em><a class="headerlink" href="#c7n.filters.offhours.Time.TZ_ALIASES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.Time.get_default_schedule">
<code class="descname">get_default_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#Time.get_default_schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.Time.get_default_schedule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.Time.get_tag_value">
<code class="descname">get_tag_value</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#Time.get_tag_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.Time.get_tag_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the resource&#8217;s tag value specifying its schedule.</p>
</dd></dl>

<dl class="classmethod">
<dt id="c7n.filters.offhours.Time.get_tz">
<em class="property">classmethod </em><code class="descname">get_tz</code><span class="sig-paren">(</span><em>tz</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#Time.get_tz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.Time.get_tz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.Time.match">
<code class="descname">match</code><span class="sig-paren">(</span><em>now</em>, <em>schedule</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#Time.match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.Time.match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.Time.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#Time.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.Time.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.Time.process_resource_schedule">
<code class="descname">process_resource_schedule</code><span class="sig-paren">(</span><em>i</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#Time.process_resource_schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.Time.process_resource_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Does the resource tag schedule and policy match the current time.</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.Time.schema">
<code class="descname">schema</code><em class="property"> = {'type': 'object', 'properties': {'opt-out': {'type': 'boolean'}, 'weekends': {'type': 'boolean'}, 'tag': {'type': 'string'}, 'weekends-only': {'type': 'boolean'}, 'default_tz': {'type': 'string'}, 'debug': {'type': 'boolean'}}}</em><a class="headerlink" href="#c7n.filters.offhours.Time.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.offhours.Time.time_type">
<code class="descname">time_type</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.offhours.Time.time_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.offhours.Time.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/offhours.html#Time.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.offhours.Time.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-c7n.filters.vpc">
<span id="c7n-filters-vpc-module"></span><h2>c7n.filters.vpc module<a class="headerlink" href="#module-c7n.filters.vpc" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="c7n.filters.vpc.DefaultVpcBase">
<em class="property">class </em><code class="descclassname">c7n.filters.vpc.</code><code class="descname">DefaultVpcBase</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/vpc.html#DefaultVpcBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.vpc.DefaultVpcBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.core.Filter" title="c7n.filters.core.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.core.Filter</span></code></a></p>
<dl class="attribute">
<dt id="c7n.filters.vpc.DefaultVpcBase.default_vpc">
<code class="descname">default_vpc</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.vpc.DefaultVpcBase.default_vpc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.vpc.DefaultVpcBase.match">
<code class="descname">match</code><span class="sig-paren">(</span><em>vpc_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters/vpc.html#DefaultVpcBase.match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.vpc.DefaultVpcBase.match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.vpc.DefaultVpcBase.vpcs">
<code class="descname">vpcs</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.vpc.DefaultVpcBase.vpcs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.filters">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-c7n.filters" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Capital One Services, LLC.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>