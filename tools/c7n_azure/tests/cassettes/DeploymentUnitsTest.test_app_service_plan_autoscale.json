{
    "version": 1,
    "interactions": [
        {
            "request": {
                "method": "GET",
                "uri": "https://management.azure.com/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/Microsoft.Web/serverfarms/cloud-custodian-test?api-version=2018-02-01",
                "body": null,
                "headers": {}
            },
            "response": {
                "status": {
                    "code": 404,
                    "message": "Not Found"
                },
                "headers": {
                    "cache-control": [
                        "no-cache"
                    ],
                    "date": [
                        "Thu, 09 May 2019 22:19:16 GMT"
                    ],
                    "content-type": [
                        "application/json; charset=utf-8"
                    ],
                    "x-ms-failure-cause": [
                        "gateway"
                    ],
                    "content-length": [
                        "123"
                    ]
                },
                "body": {
                    "data": {
                        "error": {
                            "code": "ResourceGroupNotFound",
                            "message": "Resource group 'custodian-test-deployment-units' could not be found."
                        }
                    }
                }
            }
        },
        {
            "request": {
                "method": "GET",
                "uri": "https://management.azure.com/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/Microsoft.Web/serverfarms/cloud-custodian-test?api-version=2018-02-01",
                "body": null,
                "headers": {}
            },
            "response": {
                "status": {
                    "code": 404,
                    "message": "Not Found"
                },
                "headers": {
                    "cache-control": [
                        "no-cache"
                    ],
                    "date": [
                        "Thu, 09 May 2019 22:19:17 GMT"
                    ],
                    "content-type": [
                        "application/json; charset=utf-8"
                    ],
                    "x-ms-failure-cause": [
                        "gateway"
                    ],
                    "content-length": [
                        "123"
                    ]
                },
                "body": {
                    "data": {
                        "error": {
                            "code": "ResourceGroupNotFound",
                            "message": "Resource group 'custodian-test-deployment-units' could not be found."
                        }
                    }
                }
            }
        },
        {
            "request": {
                "method": "GET",
                "uri": "https://management.azure.com/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourcegroups/custodian-test-deployment-units?api-version=2018-05-01",
                "body": null,
                "headers": {}
            },
            "response": {
                "status": {
                    "code": 404,
                    "message": "Not Found"
                },
                "headers": {
                    "cache-control": [
                        "no-cache"
                    ],
                    "date": [
                        "Thu, 09 May 2019 22:19:17 GMT"
                    ],
                    "content-type": [
                        "application/json; charset=utf-8"
                    ],
                    "x-ms-failure-cause": [
                        "gateway"
                    ],
                    "content-length": [
                        "123"
                    ]
                },
                "body": {
                    "data": {
                        "error": {
                            "code": "ResourceGroupNotFound",
                            "message": "Resource group 'custodian-test-deployment-units' could not be found."
                        }
                    }
                }
            }
        },
        {
            "request": {
                "method": "PUT",
                "uri": "https://management.azure.com/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourcegroups/custodian-test-deployment-units?api-version=2018-05-01",
                "body": "mock_body",
                "headers": {}
            },
            "response": {
                "status": {
                    "code": 201,
                    "message": "Created"
                },
                "headers": {
                    "cache-control": [
                        "no-cache"
                    ],
                    "date": [
                        "Thu, 09 May 2019 22:19:18 GMT"
                    ],
                    "x-ms-ratelimit-remaining-subscription-writes": [
                        "1199"
                    ],
                    "content-type": [
                        "application/json; charset=utf-8"
                    ],
                    "content-length": [
                        "216"
                    ]
                },
                "body": {
                    "data": {
                        "id": "/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units",
                        "name": "custodian-test-deployment-units",
                        "location": "westus2",
                        "properties": {
                            "provisioningState": "Succeeded"
                        }
                    }
                }
            }
        },
        {
            "request": {
                "method": "PUT",
                "uri": "https://management.azure.com/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/Microsoft.Web/serverfarms/cloud-custodian-test?api-version=2018-02-01",
                "body": "mock_body",
                "headers": {}
            },
            "response": {
                "status": {
                    "code": 200,
                    "message": "OK"
                },
                "headers": {
                    "cache-control": [
                        "no-cache"
                    ],
                    "date": [
                        "Thu, 09 May 2019 22:19:28 GMT"
                    ],
                    "x-ms-ratelimit-remaining-subscription-writes": [
                        "1199"
                    ],
                    "content-type": [
                        "application/json"
                    ],
                    "content-length": [
                        "1380"
                    ]
                },
                "body": {
                    "data": {
                        "id": "/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/Microsoft.Web/serverfarms/cloud-custodian-test",
                        "name": "cloud-custodian-test",
                        "type": "Microsoft.Web/serverfarms",
                        "kind": "linux",
                        "location": "West US 2",
                        "properties": {
                            "serverFarmId": 746,
                            "name": "cloud-custodian-test",
                            "workerSize": "Default",
                            "workerSizeId": 0,
                            "workerTierName": null,
                            "numberOfWorkers": 1,
                            "currentWorkerSize": "Default",
                            "currentWorkerSizeId": 0,
                            "currentNumberOfWorkers": 1,
                            "status": "Ready",
                            "webSpace": "custodian-test-deployment-units-WestUS2webspace",
                            "subscription": "aa98974b-5d2a-4d98-a78a-382f3715d07e",
                            "adminSiteName": null,
                            "hostingEnvironment": null,
                            "hostingEnvironmentProfile": null,
                            "maximumNumberOfWorkers": 3,
                            "planName": "VirtualDedicatedPlan",
                            "adminRuntimeSiteName": null,
                            "computeMode": "Dedicated",
                            "siteMode": null,
                            "geoRegion": "West US 2",
                            "perSiteScaling": false,
                            "maximumElasticWorkerCount": 1,
                            "numberOfSites": 0,
                            "hostingEnvironmentId": null,
                            "isSpot": false,
                            "spotExpirationTime": null,
                            "freeOfferExpirationTime": "2019-06-08T22:19:22.0066667",
                            "tags": null,
                            "kind": "linux",
                            "resourceGroup": "custodian-test-deployment-units",
                            "reserved": true,
                            "isXenon": false,
                            "hyperV": false,
                            "mdmId": "waws-prod-mwh-029_746",
                            "targetWorkerCount": 0,
                            "targetWorkerSizeId": 0,
                            "provisioningState": "Succeeded",
                            "webSiteId": null
                        },
                        "sku": {
                            "name": "B1",
                            "tier": "Basic",
                            "size": "B1",
                            "family": "B",
                            "capacity": 1
                        }
                    }
                }
            }
        },
        {
            "request": {
                "method": "PUT",
                "uri": "https://management.azure.com/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourcegroups/custodian-test-deployment-units/providers/microsoft.insights/autoscalesettings/cloud_custodian_default?api-version=2015-04-01",
                "body": "mock_body",
                "headers": {}
            },
            "response": {
                "status": {
                    "code": 201,
                    "message": "Created"
                },
                "headers": {
                    "cache-control": [
                        "no-cache"
                    ],
                    "date": [
                        "Thu, 09 May 2019 22:19:32 GMT"
                    ],
                    "x-ms-ratelimit-remaining-subscription-writes": [
                        "1198"
                    ],
                    "content-type": [
                        "application/json; charset=utf-8"
                    ],
                    "content-length": [
                        "1310"
                    ]
                },
                "body": {
                    "data": {
                        "id": "/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/microsoft.insights/autoscalesettings/cloud_custodian_default",
                        "name": "cloud_custodian_default",
                        "type": "Microsoft.Insights/autoscaleSettings",
                        "location": "West US 2",
                        "tags": {
                            "$type": "Microsoft.WindowsAzure.Management.Common.Storage.CasePreservedDictionary, Microsoft.WindowsAzure.Management.Common.Storage"
                        },
                        "properties": {
                            "profiles": [
                                {
                                    "name": "Cloud Custodian auto created scale condition",
                                    "capacity": {
                                        "minimum": "1",
                                        "maximum": "2",
                                        "default": "1"
                                    },
                                    "rules": [
                                        {
                                            "metricTrigger": {
                                                "metricName": "MemoryPercentage",
                                                "metricNamespace": "",
                                                "metricResourceUri": "/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/Microsoft.Web/serverfarms/cloud-custodian-test",
                                                "timeGrain": "PT1M",
                                                "statistic": "Average",
                                                "timeWindow": "PT10M",
                                                "timeAggregation": "Average",
                                                "operator": "GreaterThan",
                                                "threshold": 80.0,
                                                "dimensions": null
                                            },
                                            "scaleAction": {
                                                "direction": "Increase",
                                                "type": "ChangeCount",
                                                "value": "1",
                                                "cooldown": "PT5M"
                                            }
                                        }
                                    ]
                                }
                            ],
                            "enabled": false,
                            "name": "cloud_custodian_default",
                            "targetResourceUri": "/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/Microsoft.Web/serverfarms/cloud-custodian-test",
                            "notifications": null
                        }
                    }
                }
            }
        },
        {
            "request": {
                "method": "GET",
                "uri": "https://management.azure.com/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourcegroups/custodian-test-deployment-units/providers/microsoft.insights/autoscalesettings/cloud_custodian_default?api-version=2015-04-01",
                "body": null,
                "headers": {}
            },
            "response": {
                "status": {
                    "code": 200,
                    "message": "OK"
                },
                "headers": {
                    "cache-control": [
                        "no-cache"
                    ],
                    "date": [
                        "Thu, 09 May 2019 22:19:32 GMT"
                    ],
                    "content-type": [
                        "application/json; charset=utf-8"
                    ],
                    "content-length": [
                        "1310"
                    ]
                },
                "body": {
                    "data": {
                        "id": "/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/microsoft.insights/autoscalesettings/cloud_custodian_default",
                        "name": "cloud_custodian_default",
                        "type": "Microsoft.Insights/autoscaleSettings",
                        "location": "West US 2",
                        "tags": {
                            "$type": "Microsoft.WindowsAzure.Management.Common.Storage.CasePreservedDictionary, Microsoft.WindowsAzure.Management.Common.Storage"
                        },
                        "properties": {
                            "profiles": [
                                {
                                    "name": "Cloud Custodian auto created scale condition",
                                    "capacity": {
                                        "minimum": "1",
                                        "maximum": "2",
                                        "default": "1"
                                    },
                                    "rules": [
                                        {
                                            "metricTrigger": {
                                                "metricName": "MemoryPercentage",
                                                "metricNamespace": "",
                                                "metricResourceUri": "/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/Microsoft.Web/serverfarms/cloud-custodian-test",
                                                "timeGrain": "PT1M",
                                                "statistic": "Average",
                                                "timeWindow": "PT10M",
                                                "timeAggregation": "Average",
                                                "operator": "GreaterThan",
                                                "threshold": 80.0,
                                                "dimensions": null
                                            },
                                            "scaleAction": {
                                                "direction": "Increase",
                                                "type": "ChangeCount",
                                                "value": "1",
                                                "cooldown": "PT5M"
                                            }
                                        }
                                    ]
                                }
                            ],
                            "enabled": false,
                            "name": "cloud_custodian_default",
                            "targetResourceUri": "/subscriptions/ea42f556-5106-4743-99b0-c129bfa71a47/resourceGroups/custodian-test-deployment-units/providers/Microsoft.Web/serverfarms/cloud-custodian-test",
                            "notifications": null
                        }
                    }
                }
            }
        }
    ]
}